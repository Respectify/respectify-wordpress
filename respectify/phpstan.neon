includes:
    - vendor/szepeviktor/phpstan-wordpress/extension.neon

parameters:
    # Level 2: catches undefined variables, unknown functions, some type errors
    level: 2

    paths:
        - includes/
        - admin/
        - public/
        - respectify.php

    excludePaths:
        - vendor/
        - build/
        - phpstan-stubs/

    # Scan the respectify-php SDK for type information
    scanDirectories:
        - vendor/respectify/respectify-php/src/

    # Stub files for RespectifyScoper classes (created by PHP-Scoper at build time)
    scanFiles:
        - phpstan-stubs/respectify-scoped.php

    treatPhpDocTypesAsCertain: false
    reportUnmatchedIgnoredErrors: false

    ignoreErrors:
        # is_wp_error checks that are valid at runtime
        - '~is_wp_error\(.+\) will always evaluate to false~'
        # Missing return in intercept_comment (all code paths do return, PHPStan just can't verify)
        - '~should return array but return statement is missing~'
